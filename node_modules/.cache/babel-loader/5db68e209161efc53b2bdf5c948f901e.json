{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar color_1 = require(\"@vibrant/color\");\n\nvar converter_1 = require(\"@vibrant/color/lib/converter\");\n\nvar DefaultOpts = {\n  targetDarkLuma: 0.26,\n  maxDarkLuma: 0.45,\n  minLightLuma: 0.55,\n  targetLightLuma: 0.74,\n  minNormalLuma: 0.3,\n  targetNormalLuma: 0.5,\n  maxNormalLuma: 0.7,\n  targetMutesSaturation: 0.3,\n  maxMutesSaturation: 0.4,\n  targetVibrantSaturation: 1.0,\n  minVibrantSaturation: 0.35,\n  weightSaturation: 3,\n  weightLuma: 6.5,\n  weightPopulation: 0.5\n};\n\nfunction _findMaxPopulation(swatches) {\n  var p = 0;\n  swatches.forEach(function (s) {\n    p = Math.max(p, s.population);\n  });\n  return p;\n}\n\nfunction _isAlreadySelected(palette, s) {\n  return palette.Vibrant === s || palette.DarkVibrant === s || palette.LightVibrant === s || palette.Muted === s || palette.DarkMuted === s || palette.LightMuted === s;\n}\n\nfunction _createComparisonValue(saturation, targetSaturation, luma, targetLuma, population, maxPopulation, opts) {\n  function weightedMean() {\n    var values = [];\n\n    for (var _i = 0; _i < arguments.length; _i++) {\n      values[_i] = arguments[_i];\n    }\n\n    var sum = 0;\n    var weightSum = 0;\n\n    for (var i = 0; i < values.length; i += 2) {\n      var value = values[i];\n      var weight = values[i + 1];\n      sum += value * weight;\n      weightSum += weight;\n    }\n\n    return sum / weightSum;\n  }\n\n  function invertDiff(value, targetValue) {\n    return 1 - Math.abs(value - targetValue);\n  }\n\n  return weightedMean(invertDiff(saturation, targetSaturation), opts.weightSaturation, invertDiff(luma, targetLuma), opts.weightLuma, population / maxPopulation, opts.weightPopulation);\n}\n\nfunction _findColorVariation(palette, swatches, maxPopulation, targetLuma, minLuma, maxLuma, targetSaturation, minSaturation, maxSaturation, opts) {\n  var max = null;\n  var maxValue = 0;\n  swatches.forEach(function (swatch) {\n    var _a = swatch.hsl,\n        s = _a[1],\n        l = _a[2];\n\n    if (s >= minSaturation && s <= maxSaturation && l >= minLuma && l <= maxLuma && !_isAlreadySelected(palette, swatch)) {\n      var value = _createComparisonValue(s, targetSaturation, l, targetLuma, swatch.population, maxPopulation, opts);\n\n      if (max === null || value > maxValue) {\n        max = swatch;\n        maxValue = value;\n      }\n    }\n  });\n  return max;\n}\n\nfunction _generateVariationColors(swatches, maxPopulation, opts) {\n  var palette = {\n    Vibrant: null,\n    DarkVibrant: null,\n    LightVibrant: null,\n    Muted: null,\n    DarkMuted: null,\n    LightMuted: null\n  }; // mVibrantSwatch = findColor(TARGET_NORMAL_LUMA, MIN_NORMAL_LUMA, MAX_NORMAL_LUMA,\n  //     TARGET_VIBRANT_SATURATION, MIN_VIBRANT_SATURATION, 1f)\n\n  palette.Vibrant = _findColorVariation(palette, swatches, maxPopulation, opts.targetNormalLuma, opts.minNormalLuma, opts.maxNormalLuma, opts.targetVibrantSaturation, opts.minVibrantSaturation, 1, opts); // mLightVibrantSwatch = findColor(TARGET_LIGHT_LUMA, MIN_LIGHT_LUMA, 1f,\n  //     TARGET_VIBRANT_SATURATION, MIN_VIBRANT_SATURATION, 1f)\n\n  palette.LightVibrant = _findColorVariation(palette, swatches, maxPopulation, opts.targetLightLuma, opts.minLightLuma, 1, opts.targetVibrantSaturation, opts.minVibrantSaturation, 1, opts); // mDarkVibrantSwatch = findColor(TARGET_DARK_LUMA, 0f, MAX_DARK_LUMA,\n  //     TARGET_VIBRANT_SATURATION, MIN_VIBRANT_SATURATION, 1f)\n\n  palette.DarkVibrant = _findColorVariation(palette, swatches, maxPopulation, opts.targetDarkLuma, 0, opts.maxDarkLuma, opts.targetVibrantSaturation, opts.minVibrantSaturation, 1, opts); // mMutedSwatch = findColor(TARGET_NORMAL_LUMA, MIN_NORMAL_LUMA, MAX_NORMAL_LUMA,\n  //     TARGET_MUTED_SATURATION, 0f, MAX_MUTED_SATURATION)\n\n  palette.Muted = _findColorVariation(palette, swatches, maxPopulation, opts.targetNormalLuma, opts.minNormalLuma, opts.maxNormalLuma, opts.targetMutesSaturation, 0, opts.maxMutesSaturation, opts); // mLightMutedColor = findColor(TARGET_LIGHT_LUMA, MIN_LIGHT_LUMA, 1f,\n  //     TARGET_MUTED_SATURATION, 0f, MAX_MUTED_SATURATION)\n\n  palette.LightMuted = _findColorVariation(palette, swatches, maxPopulation, opts.targetLightLuma, opts.minLightLuma, 1, opts.targetMutesSaturation, 0, opts.maxMutesSaturation, opts); // mDarkMutedSwatch = findColor(TARGET_DARK_LUMA, 0f, MAX_DARK_LUMA,\n  //     TARGET_MUTED_SATURATION, 0f, MAX_MUTED_SATURATION)\n\n  palette.DarkMuted = _findColorVariation(palette, swatches, maxPopulation, opts.targetDarkLuma, 0, opts.maxDarkLuma, opts.targetMutesSaturation, 0, opts.maxMutesSaturation, opts);\n  return palette;\n}\n\nfunction _generateEmptySwatches(palette, maxPopulation, opts) {\n  if (!palette.Vibrant && !palette.DarkVibrant && !palette.LightVibrant) {\n    if (!palette.DarkVibrant && palette.DarkMuted) {\n      var _a = palette.DarkMuted.hsl,\n          h = _a[0],\n          s = _a[1],\n          l = _a[2];\n      l = opts.targetDarkLuma;\n      palette.DarkVibrant = new color_1.Swatch(converter_1.hslToRgb(h, s, l), 0);\n    }\n\n    if (!palette.LightVibrant && palette.LightMuted) {\n      var _b = palette.LightMuted.hsl,\n          h = _b[0],\n          s = _b[1],\n          l = _b[2];\n      l = opts.targetDarkLuma;\n      palette.DarkVibrant = new color_1.Swatch(converter_1.hslToRgb(h, s, l), 0);\n    }\n  }\n\n  if (!palette.Vibrant && palette.DarkVibrant) {\n    var _c = palette.DarkVibrant.hsl,\n        h = _c[0],\n        s = _c[1],\n        l = _c[2];\n    l = opts.targetNormalLuma;\n    palette.Vibrant = new color_1.Swatch(converter_1.hslToRgb(h, s, l), 0);\n  } else if (!palette.Vibrant && palette.LightVibrant) {\n    var _d = palette.LightVibrant.hsl,\n        h = _d[0],\n        s = _d[1],\n        l = _d[2];\n    l = opts.targetNormalLuma;\n    palette.Vibrant = new color_1.Swatch(converter_1.hslToRgb(h, s, l), 0);\n  }\n\n  if (!palette.DarkVibrant && palette.Vibrant) {\n    var _e = palette.Vibrant.hsl,\n        h = _e[0],\n        s = _e[1],\n        l = _e[2];\n    l = opts.targetDarkLuma;\n    palette.DarkVibrant = new color_1.Swatch(converter_1.hslToRgb(h, s, l), 0);\n  }\n\n  if (!palette.LightVibrant && palette.Vibrant) {\n    var _f = palette.Vibrant.hsl,\n        h = _f[0],\n        s = _f[1],\n        l = _f[2];\n    l = opts.targetLightLuma;\n    palette.LightVibrant = new color_1.Swatch(converter_1.hslToRgb(h, s, l), 0);\n  }\n\n  if (!palette.Muted && palette.Vibrant) {\n    var _g = palette.Vibrant.hsl,\n        h = _g[0],\n        s = _g[1],\n        l = _g[2];\n    l = opts.targetMutesSaturation;\n    palette.Muted = new color_1.Swatch(converter_1.hslToRgb(h, s, l), 0);\n  }\n\n  if (!palette.DarkMuted && palette.DarkVibrant) {\n    var _h = palette.DarkVibrant.hsl,\n        h = _h[0],\n        s = _h[1],\n        l = _h[2];\n    l = opts.targetMutesSaturation;\n    palette.DarkMuted = new color_1.Swatch(converter_1.hslToRgb(h, s, l), 0);\n  }\n\n  if (!palette.LightMuted && palette.LightVibrant) {\n    var _j = palette.LightVibrant.hsl,\n        h = _j[0],\n        s = _j[1],\n        l = _j[2];\n    l = opts.targetMutesSaturation;\n    palette.LightMuted = new color_1.Swatch(converter_1.hslToRgb(h, s, l), 0);\n  }\n}\n\nvar DefaultGenerator = function DefaultGenerator(swatches, opts) {\n  opts = Object.assign({}, DefaultOpts, opts);\n\n  var maxPopulation = _findMaxPopulation(swatches);\n\n  var palette = _generateVariationColors(swatches, maxPopulation, opts);\n\n  _generateEmptySwatches(palette, maxPopulation, opts);\n\n  return palette;\n};\n\nexports.default = DefaultGenerator;","map":{"version":3,"sources":["../../../../packages/vibrant-generator-default/src/index.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar color_1 = require(\"@vibrant/color\");\nvar converter_1 = require(\"@vibrant/color/lib/converter\");\nvar DefaultOpts = {\n    targetDarkLuma: 0.26,\n    maxDarkLuma: 0.45,\n    minLightLuma: 0.55,\n    targetLightLuma: 0.74,\n    minNormalLuma: 0.3,\n    targetNormalLuma: 0.5,\n    maxNormalLuma: 0.7,\n    targetMutesSaturation: 0.3,\n    maxMutesSaturation: 0.4,\n    targetVibrantSaturation: 1.0,\n    minVibrantSaturation: 0.35,\n    weightSaturation: 3,\n    weightLuma: 6.5,\n    weightPopulation: 0.5\n};\nfunction _findMaxPopulation(swatches) {\n    var p = 0;\n    swatches.forEach(function (s) {\n        p = Math.max(p, s.population);\n    });\n    return p;\n}\nfunction _isAlreadySelected(palette, s) {\n    return palette.Vibrant === s\n        || palette.DarkVibrant === s\n        || palette.LightVibrant === s\n        || palette.Muted === s\n        || palette.DarkMuted === s\n        || palette.LightMuted === s;\n}\nfunction _createComparisonValue(saturation, targetSaturation, luma, targetLuma, population, maxPopulation, opts) {\n    function weightedMean() {\n        var values = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            values[_i] = arguments[_i];\n        }\n        var sum = 0;\n        var weightSum = 0;\n        for (var i = 0; i < values.length; i += 2) {\n            var value = values[i];\n            var weight = values[i + 1];\n            sum += value * weight;\n            weightSum += weight;\n        }\n        return sum / weightSum;\n    }\n    function invertDiff(value, targetValue) {\n        return 1 - Math.abs(value - targetValue);\n    }\n    return weightedMean(invertDiff(saturation, targetSaturation), opts.weightSaturation, invertDiff(luma, targetLuma), opts.weightLuma, population / maxPopulation, opts.weightPopulation);\n}\nfunction _findColorVariation(palette, swatches, maxPopulation, targetLuma, minLuma, maxLuma, targetSaturation, minSaturation, maxSaturation, opts) {\n    var max = null;\n    var maxValue = 0;\n    swatches.forEach(function (swatch) {\n        var _a = swatch.hsl, s = _a[1], l = _a[2];\n        if (s >= minSaturation && s <= maxSaturation\n            && l >= minLuma && l <= maxLuma\n            && !_isAlreadySelected(palette, swatch)) {\n            var value = _createComparisonValue(s, targetSaturation, l, targetLuma, swatch.population, maxPopulation, opts);\n            if (max === null || value > maxValue) {\n                max = swatch;\n                maxValue = value;\n            }\n        }\n    });\n    return max;\n}\nfunction _generateVariationColors(swatches, maxPopulation, opts) {\n    var palette = {\n        Vibrant: null,\n        DarkVibrant: null,\n        LightVibrant: null,\n        Muted: null,\n        DarkMuted: null,\n        LightMuted: null\n    };\n    // mVibrantSwatch = findColor(TARGET_NORMAL_LUMA, MIN_NORMAL_LUMA, MAX_NORMAL_LUMA,\n    //     TARGET_VIBRANT_SATURATION, MIN_VIBRANT_SATURATION, 1f)\n    palette.Vibrant = _findColorVariation(palette, swatches, maxPopulation, opts.targetNormalLuma, opts.minNormalLuma, opts.maxNormalLuma, opts.targetVibrantSaturation, opts.minVibrantSaturation, 1, opts);\n    // mLightVibrantSwatch = findColor(TARGET_LIGHT_LUMA, MIN_LIGHT_LUMA, 1f,\n    //     TARGET_VIBRANT_SATURATION, MIN_VIBRANT_SATURATION, 1f)\n    palette.LightVibrant = _findColorVariation(palette, swatches, maxPopulation, opts.targetLightLuma, opts.minLightLuma, 1, opts.targetVibrantSaturation, opts.minVibrantSaturation, 1, opts);\n    // mDarkVibrantSwatch = findColor(TARGET_DARK_LUMA, 0f, MAX_DARK_LUMA,\n    //     TARGET_VIBRANT_SATURATION, MIN_VIBRANT_SATURATION, 1f)\n    palette.DarkVibrant = _findColorVariation(palette, swatches, maxPopulation, opts.targetDarkLuma, 0, opts.maxDarkLuma, opts.targetVibrantSaturation, opts.minVibrantSaturation, 1, opts);\n    // mMutedSwatch = findColor(TARGET_NORMAL_LUMA, MIN_NORMAL_LUMA, MAX_NORMAL_LUMA,\n    //     TARGET_MUTED_SATURATION, 0f, MAX_MUTED_SATURATION)\n    palette.Muted = _findColorVariation(palette, swatches, maxPopulation, opts.targetNormalLuma, opts.minNormalLuma, opts.maxNormalLuma, opts.targetMutesSaturation, 0, opts.maxMutesSaturation, opts);\n    // mLightMutedColor = findColor(TARGET_LIGHT_LUMA, MIN_LIGHT_LUMA, 1f,\n    //     TARGET_MUTED_SATURATION, 0f, MAX_MUTED_SATURATION)\n    palette.LightMuted = _findColorVariation(palette, swatches, maxPopulation, opts.targetLightLuma, opts.minLightLuma, 1, opts.targetMutesSaturation, 0, opts.maxMutesSaturation, opts);\n    // mDarkMutedSwatch = findColor(TARGET_DARK_LUMA, 0f, MAX_DARK_LUMA,\n    //     TARGET_MUTED_SATURATION, 0f, MAX_MUTED_SATURATION)\n    palette.DarkMuted = _findColorVariation(palette, swatches, maxPopulation, opts.targetDarkLuma, 0, opts.maxDarkLuma, opts.targetMutesSaturation, 0, opts.maxMutesSaturation, opts);\n    return palette;\n}\nfunction _generateEmptySwatches(palette, maxPopulation, opts) {\n    if (!palette.Vibrant && !palette.DarkVibrant && !palette.LightVibrant) {\n        if (!palette.DarkVibrant && palette.DarkMuted) {\n            var _a = palette.DarkMuted.hsl, h = _a[0], s = _a[1], l = _a[2];\n            l = opts.targetDarkLuma;\n            palette.DarkVibrant = new color_1.Swatch(converter_1.hslToRgb(h, s, l), 0);\n        }\n        if (!palette.LightVibrant && palette.LightMuted) {\n            var _b = palette.LightMuted.hsl, h = _b[0], s = _b[1], l = _b[2];\n            l = opts.targetDarkLuma;\n            palette.DarkVibrant = new color_1.Swatch(converter_1.hslToRgb(h, s, l), 0);\n        }\n    }\n    if (!palette.Vibrant && palette.DarkVibrant) {\n        var _c = palette.DarkVibrant.hsl, h = _c[0], s = _c[1], l = _c[2];\n        l = opts.targetNormalLuma;\n        palette.Vibrant = new color_1.Swatch(converter_1.hslToRgb(h, s, l), 0);\n    }\n    else if (!palette.Vibrant && palette.LightVibrant) {\n        var _d = palette.LightVibrant.hsl, h = _d[0], s = _d[1], l = _d[2];\n        l = opts.targetNormalLuma;\n        palette.Vibrant = new color_1.Swatch(converter_1.hslToRgb(h, s, l), 0);\n    }\n    if (!palette.DarkVibrant && palette.Vibrant) {\n        var _e = palette.Vibrant.hsl, h = _e[0], s = _e[1], l = _e[2];\n        l = opts.targetDarkLuma;\n        palette.DarkVibrant = new color_1.Swatch(converter_1.hslToRgb(h, s, l), 0);\n    }\n    if (!palette.LightVibrant && palette.Vibrant) {\n        var _f = palette.Vibrant.hsl, h = _f[0], s = _f[1], l = _f[2];\n        l = opts.targetLightLuma;\n        palette.LightVibrant = new color_1.Swatch(converter_1.hslToRgb(h, s, l), 0);\n    }\n    if (!palette.Muted && palette.Vibrant) {\n        var _g = palette.Vibrant.hsl, h = _g[0], s = _g[1], l = _g[2];\n        l = opts.targetMutesSaturation;\n        palette.Muted = new color_1.Swatch(converter_1.hslToRgb(h, s, l), 0);\n    }\n    if (!palette.DarkMuted && palette.DarkVibrant) {\n        var _h = palette.DarkVibrant.hsl, h = _h[0], s = _h[1], l = _h[2];\n        l = opts.targetMutesSaturation;\n        palette.DarkMuted = new color_1.Swatch(converter_1.hslToRgb(h, s, l), 0);\n    }\n    if (!palette.LightMuted && palette.LightVibrant) {\n        var _j = palette.LightVibrant.hsl, h = _j[0], s = _j[1], l = _j[2];\n        l = opts.targetMutesSaturation;\n        palette.LightMuted = new color_1.Swatch(converter_1.hslToRgb(h, s, l), 0);\n    }\n}\nvar DefaultGenerator = function (swatches, opts) {\n    opts = Object.assign({}, DefaultOpts, opts);\n    var maxPopulation = _findMaxPopulation(swatches);\n    var palette = _generateVariationColors(swatches, maxPopulation, opts);\n    _generateEmptySwatches(palette, maxPopulation, opts);\n    return palette;\n};\nexports.default = DefaultGenerator;\n//# sourceMappingURL=index.js.map"]},"metadata":{},"sourceType":"script"}