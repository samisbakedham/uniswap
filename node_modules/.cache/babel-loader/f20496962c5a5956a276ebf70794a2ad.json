{"ast":null,"code":"\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar options_1 = require(\"./options\");\n\nvar builder_1 = __importDefault(require(\"./builder\"));\n\nvar utils_1 = require(\"./utils\");\n\nvar Vibrant = function () {\n  function Vibrant(_src, opts) {\n    this._src = _src;\n    this.opts = utils_1.assignDeep({}, Vibrant.DefaultOpts, opts);\n  }\n\n  Vibrant.use = function (pipeline) {\n    this._pipeline = pipeline;\n  };\n\n  Vibrant.from = function (src) {\n    return new builder_1.default(src);\n  };\n\n  Object.defineProperty(Vibrant.prototype, \"result\", {\n    get: function () {\n      return this._result;\n    },\n    enumerable: false,\n    configurable: true\n  });\n\n  Vibrant.prototype._process = function (image, opts) {\n    var quantizer = this.opts.quantizer;\n    image.scaleDown(this.opts);\n    var processOpts = options_1.buildProcessOptions(this.opts, opts);\n    return Vibrant._pipeline.process(image.getImageData(), processOpts);\n  };\n\n  Vibrant.prototype.palette = function () {\n    return this.swatches();\n  };\n\n  Vibrant.prototype.swatches = function () {\n    throw new Error('Method deprecated. Use `Vibrant.result.palettes[name]` instead');\n  };\n\n  Vibrant.prototype.getPalette = function () {\n    var _this = this;\n\n    var arg0 = arguments[0];\n    var arg1 = arguments[1];\n    var name = typeof arg0 === 'string' ? arg0 : 'default';\n    var cb = typeof arg0 === 'string' ? arg1 : arg0;\n    var image = new this.opts.ImageClass();\n    return image.load(this._src).then(function (image) {\n      return _this._process(image, {\n        generators: [name]\n      });\n    }).then(function (result) {\n      _this._result = result;\n      return result.palettes[name];\n    }).then(function (res) {\n      image.remove();\n\n      if (cb) {\n        cb(undefined, res);\n      }\n\n      return res;\n    }).catch(function (err) {\n      image.remove();\n\n      if (cb) {\n        cb(err);\n      }\n\n      return Promise.reject(err);\n    });\n  };\n\n  Vibrant.prototype.getPalettes = function () {\n    var _this = this;\n\n    var arg0 = arguments[0];\n    var arg1 = arguments[1];\n    var names = Array.isArray(arg0) ? arg0 : ['*'];\n    var cb = Array.isArray(arg0) ? arg1 : arg0;\n    var image = new this.opts.ImageClass();\n    return image.load(this._src).then(function (image) {\n      return _this._process(image, {\n        generators: names\n      });\n    }).then(function (result) {\n      _this._result = result;\n      return result.palettes;\n    }).then(function (res) {\n      image.remove();\n\n      if (cb) {\n        cb(undefined, res);\n      }\n\n      return res;\n    }).catch(function (err) {\n      image.remove();\n\n      if (cb) {\n        cb(err);\n      }\n\n      return Promise.reject(err);\n    });\n  };\n\n  Vibrant.DefaultOpts = {\n    colorCount: 64,\n    quality: 5,\n    filters: []\n  };\n  return Vibrant;\n}();\n\nexports.default = Vibrant;","map":{"version":3,"sources":["../../../../packages/vibrant-core/src/index.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar options_1 = require(\"./options\");\nvar builder_1 = __importDefault(require(\"./builder\"));\nvar utils_1 = require(\"./utils\");\nvar Vibrant = /** @class */ (function () {\n    function Vibrant(_src, opts) {\n        this._src = _src;\n        this.opts = utils_1.assignDeep({}, Vibrant.DefaultOpts, opts);\n    }\n    Vibrant.use = function (pipeline) {\n        this._pipeline = pipeline;\n    };\n    Vibrant.from = function (src) {\n        return new builder_1.default(src);\n    };\n    Object.defineProperty(Vibrant.prototype, \"result\", {\n        get: function () {\n            return this._result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Vibrant.prototype._process = function (image, opts) {\n        var quantizer = this.opts.quantizer;\n        image.scaleDown(this.opts);\n        var processOpts = options_1.buildProcessOptions(this.opts, opts);\n        return Vibrant._pipeline.process(image.getImageData(), processOpts);\n    };\n    Vibrant.prototype.palette = function () {\n        return this.swatches();\n    };\n    Vibrant.prototype.swatches = function () {\n        throw new Error('Method deprecated. Use `Vibrant.result.palettes[name]` instead');\n    };\n    Vibrant.prototype.getPalette = function () {\n        var _this = this;\n        var arg0 = arguments[0];\n        var arg1 = arguments[1];\n        var name = typeof arg0 === 'string' ? arg0 : 'default';\n        var cb = typeof arg0 === 'string' ? arg1 : arg0;\n        var image = new this.opts.ImageClass();\n        return image\n            .load(this._src)\n            .then(function (image) { return _this._process(image, { generators: [name] }); })\n            .then(function (result) {\n            _this._result = result;\n            return result.palettes[name];\n        })\n            .then(function (res) {\n            image.remove();\n            if (cb) {\n                cb(undefined, res);\n            }\n            return res;\n        })\n            .catch(function (err) {\n            image.remove();\n            if (cb) {\n                cb(err);\n            }\n            return Promise.reject(err);\n        });\n    };\n    Vibrant.prototype.getPalettes = function () {\n        var _this = this;\n        var arg0 = arguments[0];\n        var arg1 = arguments[1];\n        var names = Array.isArray(arg0) ? arg0 : ['*'];\n        var cb = Array.isArray(arg0) ? arg1 : arg0;\n        var image = new this.opts.ImageClass();\n        return image\n            .load(this._src)\n            .then(function (image) {\n            return _this._process(image, {\n                generators: names\n            });\n        })\n            .then(function (result) {\n            _this._result = result;\n            return result.palettes;\n        })\n            .then(function (res) {\n            image.remove();\n            if (cb) {\n                cb(undefined, res);\n            }\n            return res;\n        })\n            .catch(function (err) {\n            image.remove();\n            if (cb) {\n                cb(err);\n            }\n            return Promise.reject(err);\n        });\n    };\n    Vibrant.DefaultOpts = {\n        colorCount: 64,\n        quality: 5,\n        filters: []\n    };\n    return Vibrant;\n}());\nexports.default = Vibrant;\n//# sourceMappingURL=index.js.map"]},"metadata":{},"sourceType":"script"}