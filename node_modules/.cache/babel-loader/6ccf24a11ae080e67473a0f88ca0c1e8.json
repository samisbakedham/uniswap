{"ast":null,"code":"import _slicedToArray from\"/Users/safahi/Downloads/interface-4.30.1/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useEffect,useMemo,useState}from'react';import{REWARDS_DURATION_DAYS,STAKING_GENESIS}from'../../state/stake/hooks';import{ThemedText}from'../../theme';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var MINUTE=60;var HOUR=MINUTE*60;var DAY=HOUR*24;var REWARDS_DURATION=DAY*REWARDS_DURATION_DAYS;export function Countdown(_ref){var exactEnd=_ref.exactEnd;// get end/beginning times\nvar end=useMemo(function(){return exactEnd?Math.floor(exactEnd.getTime()/1000):STAKING_GENESIS+REWARDS_DURATION;},[exactEnd]);var begin=useMemo(function(){return end-REWARDS_DURATION;},[end]);// get current time\nvar _useState=useState(function(){return Math.floor(Date.now()/1000);}),_useState2=_slicedToArray(_useState,2),time=_useState2[0],setTime=_useState2[1];useEffect(function(){// we only need to tick if rewards haven't ended yet\nif(time<=end){var timeout=setTimeout(function(){return setTime(Math.floor(Date.now()/1000));},1000);return function(){clearTimeout(timeout);};}},[time,end]);var timeUntilGenesis=begin-time;var timeUntilEnd=end-time;var timeRemaining;var message;if(timeUntilGenesis>=0){message='Rewards begin in';timeRemaining=timeUntilGenesis;}else{var ongoing=timeUntilEnd>=0;if(ongoing){message='Rewards end in';timeRemaining=timeUntilEnd;}else{message='Rewards have ended!';timeRemaining=Infinity;}}var days=(timeRemaining-timeRemaining%DAY)/DAY;timeRemaining-=days*DAY;var hours=(timeRemaining-timeRemaining%HOUR)/HOUR;timeRemaining-=hours*HOUR;var minutes=(timeRemaining-timeRemaining%MINUTE)/MINUTE;timeRemaining-=minutes*MINUTE;var seconds=timeRemaining;return/*#__PURE__*/_jsxs(ThemedText.Black,{fontWeight:400,children:[message,' ',Number.isFinite(timeRemaining)&&/*#__PURE__*/_jsx(\"code\",{children:\"\".concat(days,\":\").concat(hours.toString().padStart(2,'0'),\":\").concat(minutes.toString().padStart(2,'0'),\":\").concat(seconds.toString().padStart(2,'0'))})]});}","map":{"version":3,"sources":["/Users/safahi/Downloads/interface-4.30.1/src/pages/Earn/Countdown.tsx"],"names":["useEffect","useMemo","useState","REWARDS_DURATION_DAYS","STAKING_GENESIS","ThemedText","MINUTE","HOUR","DAY","REWARDS_DURATION","Countdown","exactEnd","end","Math","floor","getTime","begin","Date","now","time","setTime","timeout","setTimeout","clearTimeout","timeUntilGenesis","timeUntilEnd","timeRemaining","message","ongoing","Infinity","days","hours","minutes","seconds","Number","isFinite","toString","padStart"],"mappings":"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","sourcesContent":["import { useEffect, useMemo, useState } from 'react'\n\nimport { REWARDS_DURATION_DAYS, STAKING_GENESIS } from '../../state/stake/hooks'\nimport { ThemedText } from '../../theme'\n\nconst MINUTE = 60\nconst HOUR = MINUTE * 60\nconst DAY = HOUR * 24\nconst REWARDS_DURATION = DAY * REWARDS_DURATION_DAYS\n\nexport function Countdown({ exactEnd }: { exactEnd?: Date }) {\n  // get end/beginning times\n  const end = useMemo(\n    () => (exactEnd ? Math.floor(exactEnd.getTime() / 1000) : STAKING_GENESIS + REWARDS_DURATION),\n    [exactEnd]\n  )\n  const begin = useMemo(() => end - REWARDS_DURATION, [end])\n\n  // get current time\n  const [time, setTime] = useState(() => Math.floor(Date.now() / 1000))\n  useEffect((): (() => void) | void => {\n    // we only need to tick if rewards haven't ended yet\n    if (time <= end) {\n      const timeout = setTimeout(() => setTime(Math.floor(Date.now() / 1000)), 1000)\n      return () => {\n        clearTimeout(timeout)\n      }\n    }\n  }, [time, end])\n\n  const timeUntilGenesis = begin - time\n  const timeUntilEnd = end - time\n\n  let timeRemaining: number\n  let message: string\n  if (timeUntilGenesis >= 0) {\n    message = 'Rewards begin in'\n    timeRemaining = timeUntilGenesis\n  } else {\n    const ongoing = timeUntilEnd >= 0\n    if (ongoing) {\n      message = 'Rewards end in'\n      timeRemaining = timeUntilEnd\n    } else {\n      message = 'Rewards have ended!'\n      timeRemaining = Infinity\n    }\n  }\n\n  const days = (timeRemaining - (timeRemaining % DAY)) / DAY\n  timeRemaining -= days * DAY\n  const hours = (timeRemaining - (timeRemaining % HOUR)) / HOUR\n  timeRemaining -= hours * HOUR\n  const minutes = (timeRemaining - (timeRemaining % MINUTE)) / MINUTE\n  timeRemaining -= minutes * MINUTE\n  const seconds = timeRemaining\n\n  return (\n    <ThemedText.Black fontWeight={400}>\n      {message}{' '}\n      {Number.isFinite(timeRemaining) && (\n        <code>\n          {`${days}:${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds\n            .toString()\n            .padStart(2, '0')}`}\n        </code>\n      )}\n    </ThemedText.Black>\n  )\n}\n"]},"metadata":{},"sourceType":"module"}